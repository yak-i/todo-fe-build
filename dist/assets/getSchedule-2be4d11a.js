import{W as y,l as h,r as re,d as z,C as J,X as I}from"./index-602bdd3d.js";import{d as m,i as v,a as se,s as ae,t as ie,b as S,M as oe,S as G,e as ue,U as b,g as F,c as B,f as H,h as E,j as fe,k as N,l as le,m as W,n as de,o as ge,p as ce,q as Ae,r as Te}from"./_Uint8Array-2b7b1f45.js";const U=(e,n)=>y.get("doneAction",{params:{day:e,todoIds:n},headers:{Authorization:h.getItem("authToken")}}),Cn=(e,n)=>y.post(`doneAction/${e}`,{day:n},{headers:{Authorization:h.getItem("authToken")}}),Gn=e=>y.delete(`doneAction/${e}`,{headers:{Authorization:h.getItem("authToken")}}),M=(e,n)=>m(e).format(n),_=e=>M(e,"YYYY-MM-DD"),bn=e=>M(e,"MMM DD"),Fn=e=>M(e,"HH:mm"),Bn=e=>m(e).toDate(),Hn=e=>m(`1990-01-01 ${e}`).toDate(),ye=()=>{const{setDoneActions:e}=te(),[n,t]=re.useState(_(new Date)),r=z();return{...J(["doneActionList",n],async()=>{const i=(await U(n,[])).data;return e(i),i},{enabled:!1,retry:!1,staleTime:1/0}),getDoneActionList:async(i,o)=>(t(i),await r.fetchQuery(["doneActionList",i],async()=>{const f=(await U(i,o)).data;return e(f),f}))}},he={day:_(new Date)},pe=I(e=>({...he,setPrevDay:()=>e(({day:n})=>({day:_(new Date(Date.parse(n)-864e5))})),setNextDay:()=>e(({day:n})=>({day:_(new Date(Date.parse(n)+864e5))})),setToday:()=>e(()=>({day:_(new Date)}))}),"SettingsStore");function De(e){return e}var we=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/;function x(e,n){if(v(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||se(e)?!0:ve.test(e)||!we.test(e)||n!=null&&e in Object(n)}function V(e,n){return v(e)?e:x(e,n)?[e]:ae(ie(e))}function k(e,n){n=V(n,e);for(var t=0,r=n.length;e!=null&&t<r;)e=e[S(n[t++])];return t&&t==r?e:void 0}function _e(e,n,t){var r=e==null?void 0:k(e,n);return r===void 0?t:r}var Oe="__lodash_hash_undefined__";function Pe(e){return this.__data__.set(e,Oe),this}function Le(e){return this.__data__.has(e)}function R(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new oe;++n<t;)this.add(e[n])}R.prototype.add=R.prototype.push=Pe;R.prototype.has=Le;function Ee(e,n){for(var t=-1,r=e==null?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}function Re(e,n){return e.has(n)}var Se=1,$e=2;function j(e,n,t,r,a,s){var i=t&Se,o=e.length,u=n.length;if(o!=u&&!(i&&u>o))return!1;var f=s.get(e),g=s.get(n);if(f&&g)return f==n&&g==e;var d=-1,l=!0,T=t&$e?new R:void 0;for(s.set(e,n),s.set(n,e);++d<o;){var c=e[d],A=n[d];if(r)var p=i?r(A,c,d,n,e,s):r(c,A,d,e,n,s);if(p!==void 0){if(p)continue;l=!1;break}if(T){if(!Ee(n,function(D,w){if(!Re(T,w)&&(c===D||a(c,D,t,r,s)))return T.push(w)})){l=!1;break}}else if(!(c===A||a(c,A,t,r,s))){l=!1;break}}return s.delete(e),s.delete(n),l}function Ie(e){var n=-1,t=Array(e.size);return e.forEach(function(r,a){t[++n]=[a,r]}),t}function me(e){var n=-1,t=Array(e.size);return e.forEach(function(r){t[++n]=r}),t}var Me=1,xe=2,qe="[object Boolean]",Ce="[object Date]",Ge="[object Error]",be="[object Map]",Fe="[object Number]",Be="[object RegExp]",He="[object Set]",Ne="[object String]",Ue="[object Symbol]",Ye="[object ArrayBuffer]",Qe="[object DataView]",Y=G?G.prototype:void 0,$=Y?Y.valueOf:void 0;function Ke(e,n,t,r,a,s,i){switch(t){case Qe:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Ye:return!(e.byteLength!=n.byteLength||!s(new b(e),new b(n)));case qe:case Ce:case Fe:return ue(+e,+n);case Ge:return e.name==n.name&&e.message==n.message;case Be:case Ne:return e==n+"";case be:var o=Ie;case He:var u=r&Me;if(o||(o=me),e.size!=n.size&&!u)return!1;var f=i.get(e);if(f)return f==n;r|=xe,i.set(e,n);var g=j(o(e),o(n),r,a,s,i);return i.delete(e),g;case Ue:if($)return $.call(e)==$.call(n)}return!1}var Xe=1,Ze=Object.prototype,ze=Ze.hasOwnProperty;function Je(e,n,t,r,a,s){var i=t&Xe,o=F(e),u=o.length,f=F(n),g=f.length;if(u!=g&&!i)return!1;for(var d=u;d--;){var l=o[d];if(!(i?l in n:ze.call(n,l)))return!1}var T=s.get(e),c=s.get(n);if(T&&c)return T==n&&c==e;var A=!0;s.set(e,n),s.set(n,e);for(var p=i;++d<u;){l=o[d];var D=e[l],w=n[l];if(r)var C=i?r(w,D,l,n,e,s):r(D,w,l,e,n,s);if(!(C===void 0?D===w||a(D,w,t,r,s):C)){A=!1;break}p||(p=l=="constructor")}if(A&&!p){var O=e.constructor,P=n.constructor;O!=P&&"constructor"in e&&"constructor"in n&&!(typeof O=="function"&&O instanceof O&&typeof P=="function"&&P instanceof P)&&(A=!1)}return s.delete(e),s.delete(n),A}var We=1,Q="[object Arguments]",K="[object Array]",L="[object Object]",Ve=Object.prototype,X=Ve.hasOwnProperty;function ke(e,n,t,r,a,s){var i=v(e),o=v(n),u=i?K:B(e),f=o?K:B(n);u=u==Q?L:u,f=f==Q?L:f;var g=u==L,d=f==L,l=u==f;if(l&&H(e)){if(!H(n))return!1;i=!0,g=!1}if(l&&!g)return s||(s=new E),i||fe(e)?j(e,n,t,r,a,s):Ke(e,n,u,t,r,a,s);if(!(t&We)){var T=g&&X.call(e,"__wrapped__"),c=d&&X.call(n,"__wrapped__");if(T||c){var A=T?e.value():e,p=c?n.value():n;return s||(s=new E),a(A,p,t,r,s)}}return l?(s||(s=new E),Je(e,n,t,r,a,s)):!1}function q(e,n,t,r,a){return e===n?!0:e==null||n==null||!N(e)&&!N(n)?e!==e&&n!==n:ke(e,n,t,r,q,a)}var je=1,en=2;function nn(e,n,t,r){var a=t.length,s=a,i=!r;if(e==null)return!s;for(e=Object(e);a--;){var o=t[a];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<s;){o=t[a];var u=o[0],f=e[u],g=o[1];if(i&&o[2]){if(f===void 0&&!(u in e))return!1}else{var d=new E;if(r)var l=r(f,g,u,e,n,d);if(!(l===void 0?q(g,f,je|en,r,d):l))return!1}}return!0}function ee(e){return e===e&&!le(e)}function tn(e){for(var n=W(e),t=n.length;t--;){var r=n[t],a=e[r];n[t]=[r,a,ee(a)]}return n}function ne(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==void 0||e in Object(t))}}function rn(e){var n=tn(e);return n.length==1&&n[0][2]?ne(n[0][0],n[0][1]):function(t){return t===e||nn(t,e,n)}}function sn(e,n){return e!=null&&n in Object(e)}function an(e,n,t){n=V(n,e);for(var r=-1,a=n.length,s=!1;++r<a;){var i=S(n[r]);if(!(s=e!=null&&t(e,i)))break;e=e[i]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&de(a)&&ge(i,a)&&(v(e)||ce(e)))}function on(e,n){return e!=null&&an(e,n,sn)}var un=1,fn=2;function ln(e,n){return x(e)&&ee(n)?ne(S(e),n):function(t){var r=_e(t,e);return r===void 0&&r===n?on(t,e):q(n,r,un|fn)}}function dn(e){return function(n){return n==null?void 0:n[e]}}function gn(e){return function(n){return k(n,e)}}function cn(e){return x(e)?dn(S(e)):gn(e)}function An(e){return typeof e=="function"?e:e==null?De:typeof e=="object"?v(e)?ln(e[0],e[1]):rn(e):cn(e)}function Tn(e,n,t,r){for(var a=-1,s=e==null?0:e.length;++a<s;){var i=e[a];n(r,i,t(i),e)}return r}function yn(e){return function(n,t,r){for(var a=-1,s=Object(n),i=r(n),o=i.length;o--;){var u=i[e?o:++a];if(t(s[u],u,s)===!1)break}return n}}var hn=yn();const pn=hn;function Dn(e,n){return e&&pn(e,n,W)}function wn(e,n){return function(t,r){if(t==null)return t;if(!Ae(t))return e(t,r);for(var a=t.length,s=n?a:-1,i=Object(t);(n?s--:++s<a)&&r(i[s],s,i)!==!1;);return t}}var vn=wn(Dn);const _n=vn;function On(e,n,t,r){return _n(e,function(a,s,i){n(r,a,t(a),i)}),r}function Pn(e,n){return function(t,r){var a=v(t)?Tn:On,s=n?n():{};return a(t,e,An(r),s)}}var Ln=Object.prototype,En=Ln.hasOwnProperty,Rn=Pn(function(e,n,t){En.call(e,t)?e[t].push(n):Te(e,t,[n])});const Sn=Rn,$n={doneActions:{}},te=I(e=>({...$n,setDoneActions:n=>e(()=>({doneActions:Sn(n,"todo")})),addDoneAction:n=>e(({doneActions:t})=>({doneActions:{...t,[n.todo]:[...t[n.todo]||[],n]}})),deleteDoneAction:(n,t)=>e(({doneActions:r})=>({doneActions:{...r,[t]:r[t].filter(a=>a.id!==n)}}))}),"DoneActionsStore"),Nn=()=>y.get("todo",{headers:{Authorization:h.getItem("authToken")}}),Z=e=>y.get("todo/active",{params:{day:e},headers:{Authorization:h.getItem("authToken")}}),Un=e=>y.delete(`todo/${e}`,{headers:{Authorization:h.getItem("authToken")}}),Yn=e=>y.post("todo",e,{headers:{Authorization:h.getItem("authToken")}}),Qn=(e,n)=>y.put(`todo/${n}`,e,{headers:{Authorization:h.getItem("authToken")}}),Kn=(e,n)=>y.put(`todo/${n}`,e,{headers:{Authorization:h.getItem("authToken")}}),Xn=()=>{const{setActiveTodos:e}=mn(),{setDoneActions:n}=te(),{getDoneActionList:t}=ye(),{day:r}=pe(),a=z();return{...J(["activeTodoList",r],async()=>(await Z(r)).data,{enabled:!1,retry:!1,staleTime:1/0,onSuccess:o=>{e(o),t(r,o.map(u=>u.id))}}),getActiveTodoList:async()=>await a.fetchQuery(["activeTodoList",r],async()=>(n([]),(await Z(r)).data))}},In={activeTodos:[],allTodos:[]},mn=I(e=>({...In,setAllTodos:n=>e(()=>({allTodos:n})),setActiveTodos:n=>e(()=>({activeTodos:n})),addTodo:n=>e(t=>({allTodos:[...t.allTodos,n]})),replaceTodo:n=>e(t=>{const r=t.allTodos.findIndex(a=>a.id===n.id);return{allTodos:[...t.allTodos.slice(0,r),n,...t.allTodos.slice(r+1)]}}),deleteTodo:n=>e(t=>({activeTodos:t.activeTodos.filter(r=>r.id!==n),allTodos:t.allTodos.filter(r=>r.id!==n)}))}),"TodoStore"),Mn=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],Zn=e=>{if(e.weekDays.length===0)return"Не повторяeтся";const n=e.weekDays.length<7?`Каждый ${e.weekDays.map(t=>Mn[t]).join(", ")}`:"Ежедневно";return e.time.length>0?`${n} в ${e.time.join(", ")}`:e.quantity>1?`${n}, ${e.quantity} раза в день`:n};export{pe as a,mn as b,Xn as c,Gn as d,Yn as e,bn as f,Zn as g,Un as h,Nn as i,Qn as j,_ as k,Hn as l,Cn as m,Fn as n,Bn as o,Kn as t,te as u};
