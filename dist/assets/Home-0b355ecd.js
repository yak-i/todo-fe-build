import{r as x,j as e,H as h,I as c,M as b,S as f,a as g,b as M,c as v}from"./index-602bdd3d.js";import{u as p,B as i,T as u}from"./_Uint8Array-2b7b1f45.js";import{u as D,d as C,a as y,m as w,g as T,b as z,c as R,f as L}from"./getSchedule-2be4d11a.js";const q=()=>{const{deleteDoneAction:t}=D(),n=p(async({todoId:s,id:o})=>(await C(o),{todoId:s,id:o}),{onSuccess:({todoId:s,id:o})=>{t(o,s)}});return[x.useCallback((s,o)=>n.mutateAsync({id:s,todoId:o}),[n]),n.isLoading]},H=()=>{const{day:t}=y(),{addDoneAction:n}=D(),a=p(async({todoId:o,day:l})=>(await w(o,l)).data,{onSuccess:o=>{n(o)}});return[x.useCallback(o=>a.mutateAsync({todoId:o,day:t}),[a,t]),a.isLoading]},I=({todo:t,doneActions:n})=>{const[a]=H(),[s]=q(),o=async()=>{await a(t.id)},l=async j=>{await s(j,t.id)},m=t.time.length||t.quantity,d=n.length;return e.jsx(h,{mt:2,children:Array.from(Array(m)).map((j,r)=>{const S=d>r,k=d===r,A=d<r;return e.jsxs(i,{children:[S&&e.jsx(c,{type:"button",colorScheme:"teal","aria-label":"Done",size:"md",isRound:!0,icon:e.jsx(b,{}),variant:"solid",fontSize:"24px",onClick:()=>{l(n[r].id)}}),k&&e.jsx(c,{type:"button",onClick:o,colorScheme:"teal","aria-label":"Mark Done",size:"md",isRound:!0,variant:"outline",icon:e.jsx(b,{}),fontSize:"16px"}),A&&e.jsx(i,{h:"40px",w:"40px",borderRadius:"50%",border:"1px solid",borderColor:"teal"})]},r)})})},B=({item:t,doneActions:n})=>e.jsxs(h,{justifyContent:"space-between",bgColor:"gray.700",mt:2,mb:2,p:4,borderRadius:"16px",children:[e.jsxs(i,{children:[e.jsxs(u,{fontSize:"xl",color:"white",children:[t.icon," ",t.title]}),e.jsx(u,{fontSize:"sm",color:"gray.400",children:T(t)})]}),e.jsx(I,{todo:t,doneActions:n})]},t.id),E=()=>{const{day:t}=y(),{activeTodos:n}=z(),{doneActions:a}=D(),{getActiveTodoList:s}=R();return x.useEffect(()=>{s()},[t]),e.jsx(i,{children:n.map(o=>e.jsx(B,{item:o,doneActions:a[o.id]||[]},o.id))})},N=()=>{const{day:t,setNextDay:n,setPrevDay:a,setToday:s}=y();return e.jsxs(f,{direction:"row",spacing:2,align:"center",mt:4,children:[e.jsx(c,{type:"button",colorScheme:"blue",variant:"outline",fontSize:20,onClick:s,"aria-label":"Today",children:e.jsx(g,{})}),e.jsx(c,{type:"button",colorScheme:"blue",variant:"outline",fontSize:24,onClick:a,"aria-label":"Previous Day",children:e.jsx(M,{})}),e.jsx(u,{children:L(t)}),e.jsx(c,{type:"button",colorScheme:"blue",variant:"outline",fontSize:24,onClick:n,"aria-label":"Next Day",children:e.jsx(v,{})})]})},G=()=>e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(E,{})]});export{G as default};
